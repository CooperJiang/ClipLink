"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{14809:(e,t,s)=>{s.d(t,{t:()=>d,d:()=>o});var r=s(95155),a=s(12115),i=s(51368);function n(e){let{id:t,message:s,type:i,duration:n=3e3,onClose:c}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{c(t)},n);return()=>clearTimeout(e)},[t,n,c]),(0,r.jsxs)("div",{className:"".concat({success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-amber-500"}[i]," text-white px-4 py-3 rounded-lg shadow-md flex items-center justify-between w-full animate-fade-in"),role:"alert",children:[(0,r.jsx)("div",{className:"flex items-center flex-grow mr-2",children:(0,r.jsx)("p",{className:"text-sm font-medium truncate",children:s})}),(0,r.jsx)("button",{className:"flex-shrink-0 text-white hover:text-gray-100",onClick:()=>c(t),"aria-label":"关闭",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function c(e){let{toasts:t,onClose:s}=e;return 0===t.length?null:(0,r.jsx)("div",{className:"fixed top-5 right-2 sm:right-5 z-50 flex flex-col gap-3 items-end max-w-[90vw] sm:max-w-xs",children:t.map(e=>(0,r.jsx)(n,{id:e.id,message:e.message,type:e.type,duration:e.duration,onClose:s},e.id))})}let l=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e},d=e=>{let{children:t}=e,[s,n]=(0,a.useState)([]),o=(0,a.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=(0,i.A)();return n(a=>[...a,{id:r,message:e,type:t,duration:s}]),r},[]),d=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(l.Provider,{value:{showToast:o,hideToast:d},children:[t,(0,r.jsx)(c,{toasts:s,onClose:d})]})}},26420:(e,t,s)=>{s.d(t,{A:()=>u});var r=s(95155),a=s(12115),i=s(36505),n=s(3578),c=s(92023),l=s(44496),o=s(58497),d=s(34646),x=s(83846);function u(e){let{isOpen:t,onClose:s,onSave:u,initialData:g}=e,[f,p]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!0),[E,A]=(0,a.useState)(!1),[C,T]=(0,a.useState)(c.D.TEXT),[D,k]=(0,a.useState)(c.b.DESKTOP),[S,_]=(0,a.useState)(!1),L=C===c.D.CODE?(0,x.o)(b):"";(0,a.useEffect)(()=>{g?(p(g.title||""),y(g.content),j(g.isFavorite),T(g.type),k(g.device_type||(0,l.A)())):(p(""),y(""),j(!1),T(c.D.TEXT),k((0,l.A)())),w(!0)},[g,t]);let O=e=>e.trim()?e.startsWith("http://")||e.startsWith("https://")?c.D.LINK:e.includes("{")||e.includes("}")||e.includes("function")||e.includes("class")||e.includes("<")&&e.includes(">")?c.D.CODE:c.D.TEXT:c.D.TEXT;(0,a.useEffect)(()=>{g||T(O(b))},[b,g]);let P=async e=>{if(e.preventDefault(),b.trim()){A(!0);try{await u({title:f.trim()||void 0,content:b.trim(),isFavorite:v,type:C,device_type:D}),s()}catch(e){console.error("保存失败:",e)}finally{A(!1)}}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-lg mx-4 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"编辑剪贴板内容"}),(0,r.jsx)("button",{className:"text-gray-400 hover:text-gray-600 focus:outline-none",onClick:s,children:(0,r.jsx)(i.g,{icon:n.Jyw,className:"text-lg"})})]}),(0,r.jsx)("form",{onSubmit:P,children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"标题"}),(0,r.jsx)("input",{type:"text",id:"edit-title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入标题(可选)",value:f,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"内容类型"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)(m,{type:c.D.TEXT,currentType:C,icon:n.jrc,label:"文本",onClick:T}),(0,r.jsx)(m,{type:c.D.LINK,currentType:C,icon:n.CQO,label:"链接",onClick:T}),(0,r.jsx)(m,{type:c.D.CODE,currentType:C,icon:n.jTw,label:"代码",onClick:T}),(0,r.jsx)(m,{type:c.D.PASSWORD,currentType:C,icon:n.DW4,label:"密码",onClick:T}),(0,r.jsx)(m,{type:c.D.IMAGE,currentType:C,icon:n.Cyq,label:"图片",onClick:T}),(0,r.jsx)(m,{type:c.D.FILE,currentType:C,icon:n.A4h,label:"文件",onClick:T})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"设备类型"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h,{type:c.b.DESKTOP,currentType:D,icon:n.ArK,label:"电脑",onClick:k}),(0,r.jsx)(h,{type:c.b.PHONE,currentType:D,icon:n.mVu,label:"手机",onClick:k})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"edit-content",className:"block text-sm font-medium text-gray-700 mb-1",children:"内容"}),C===c.D.CODE&&S?(0,r.jsxs)("div",{className:"border border-gray-300 rounded-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-1 bg-gray-100 border-b border-gray-300",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:L}),(0,r.jsxs)("button",{type:"button",className:"p-1 text-xs text-gray-500 hover:text-gray-700 focus:outline-none",onClick:()=>_(!1),children:[(0,r.jsx)(i.g,{icon:n.k6j,className:"mr-1"}),(0,r.jsx)("span",{children:"编辑模式"})]})]}),(0,r.jsx)("div",{className:"h-56 overflow-y-auto custom-scrollbar bg-gray-900",children:(0,r.jsx)(o.A,{language:L,style:d.uf,customStyle:{margin:0,padding:"8px",fontSize:"0.75rem",backgroundColor:"transparent",height:"auto",minHeight:"100%"},wrapLines:!0,wrapLongLines:!0,showLineNumbers:!0,lineNumberStyle:{opacity:.4,minWidth:"2.5em",paddingRight:"0.5em"},children:b})})]}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{id:"edit-content",rows:C===c.D.CODE?10:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"请输入内容",value:b,onChange:e=>y(e.target.value),required:!0}),C===c.D.CODE&&(0,r.jsxs)("button",{type:"button",className:"absolute top-2 right-2 p-1 text-xs bg-gray-200 text-gray-600 rounded hover:bg-gray-300 hover:text-gray-800 focus:outline-none flex items-center",onClick:()=>_(!0),children:[(0,r.jsx)(i.g,{icon:n.pS3,className:"mr-1"}),(0,r.jsx)("span",{children:"预览"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mr-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"edit-favorite",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:v,onChange:e=>j(e.target.checked)}),(0,r.jsx)("label",{htmlFor:"edit-favorite",className:"ml-2 text-sm text-gray-700",children:"添加到收藏"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"edit-visible",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:N,onChange:e=>w(e.target.checked)}),(0,r.jsx)("label",{htmlFor:"edit-visible",className:"ml-2 text-sm text-gray-700",children:"内容可见"}),(0,r.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(隐藏时需要标题)"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none",onClick:s,disabled:E,children:"取消"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",disabled:E||!b.trim(),children:E?"保存中...":"保存更改"})]})]})})]})}):null}function m(e){let{type:t,currentType:s,icon:a,label:n,onClick:c}=e,l=t===s;return(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-1 px-2 py-1 rounded text-sm ".concat(l?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>c(t),children:[(0,r.jsx)(i.g,{icon:a}),(0,r.jsx)("span",{children:n})]})}function h(e){let{type:t,currentType:s,icon:a,label:n,onClick:c}=e,l=t===s;return(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm ".concat(l?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>c(t),children:[(0,r.jsx)(i.g,{icon:a}),(0,r.jsx)("span",{children:n})]})}},44496:(e,t,s)=>{s.d(t,{A:()=>a,j:()=>i});var r=s(92023);function a(){if("undefined"==typeof navigator)return r.b.OTHER;let e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipod|blackberry|iemobile|opera mini|mobile/i.test(e)||window.innerWidth<768?r.b.PHONE:r.b.DESKTOP}function i(e){switch(e){case r.b.DESKTOP:return"电脑";case r.b.PHONE:return"手机";case r.b.TABLET:return"平板";default:return"其他设备"}}},51228:(e,t,s)=>{s.d(t,{A:()=>b});var r=s(95155),a=s(12115),i=s(6874),n=s.n(i),c=s(36505),l=s(3578),o=s(92023),d=s(44496);function x(){let[e,t]=(0,a.useState)(o.b.OTHER);return(0,a.useEffect)(()=>{{t((0,d.A)());let e=()=>{t((0,d.A)())};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}},[]),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[(0,r.jsx)("span",{className:"mr-1",children:(()=>{switch(e){case o.b.DESKTOP:return(0,r.jsx)(c.g,{icon:l.ArK});case o.b.PHONE:return(0,r.jsx)(c.g,{icon:l.mVu});case o.b.TABLET:return(0,r.jsx)(c.g,{icon:l.Wm9});default:return(0,r.jsx)(c.g,{icon:l.EvL})}})()}),(0,r.jsx)("span",{children:(0,d.j)(e)})]})}function u(){return(0,r.jsxs)("nav",{className:"bg-white border-b border-gray-200 py-3 px-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.g,{icon:l.YEm,className:"text-blue-600 text-xl"}),(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"ClipFlow"})]}),(0,r.jsx)("span",{className:"text-xs text-gray-400 hidden sm:inline-block",children:"|"}),(0,r.jsx)("span",{className:"text-xs text-gray-400 hidden sm:inline-block",children:"跨设备智能剪贴板"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(x,{}),(0,r.jsx)("button",{className:"text-gray-500 hover:text-gray-700 focus:outline-none transition-colors",children:(0,r.jsx)(c.g,{icon:l.BH7})}),(0,r.jsx)("button",{className:"text-gray-500 hover:text-gray-700 focus:outline-none transition-colors",children:(0,r.jsx)(c.g,{icon:l.APe})}),(0,r.jsxs)(n(),{href:"/login",className:"relative inline-flex items-center px-3 py-1.5 rounded-full bg-blue-50 text-sm text-blue-700 font-medium hover:bg-blue-100 transition-colors",children:[(0,r.jsx)(c.g,{icon:l.VFr,className:"mr-1.5"}),(0,r.jsx)("span",{children:"登录"})]})]})]})}var m=s(35695);function h(){let e=(0,m.usePathname)();return(0,r.jsxs)("div",{className:"hidden md:flex flex-col w-16 bg-white border-r border-gray-200",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center pt-6 gap-6",children:[(0,r.jsx)(g,{href:"/",icon:l.YEm,label:"剪贴板",isActive:"/"===e}),(0,r.jsx)(g,{href:"/favorites",icon:l.yy,label:"收藏夹",isActive:"/favorites"===e}),(0,r.jsx)(g,{href:"/history",icon:l.Yj9,label:"历史",isActive:"/history"===e}),(0,r.jsx)(g,{href:"/categories",icon:l.ao0,label:"分类",isActive:"/categories"===e})]}),(0,r.jsx)("div",{className:"py-6 flex flex-col items-center",children:(0,r.jsx)(g,{href:"/sync",icon:l.PIP,label:"同步",isActive:"/sync"===e})})]})}function g(e){let{href:t,icon:s,label:a,isActive:i}=e;return(0,r.jsxs)(n(),{href:t,className:"flex flex-col items-center ".concat(i?"text-blue-600":"text-gray-400 hover:text-gray-600"," text-xs"),children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(i?"bg-blue-50":"hover:bg-gray-50"," flex items-center justify-center mb-1"),children:(0,r.jsx)(c.g,{icon:s,className:"text-lg"})}),(0,r.jsx)("span",{children:a})]})}function f(){let e=(0,m.usePathname)();return(0,r.jsxs)("div",{className:"md:hidden bg-white border-t border-gray-200 grid grid-cols-4 gap-1 p-1",children:[(0,r.jsx)(p,{href:"/",icon:l.YEm,label:"剪贴板",isActive:"/"===e}),(0,r.jsx)(p,{href:"/favorites",icon:l.yy,label:"收藏夹",isActive:"/favorites"===e}),(0,r.jsx)(p,{href:"/history",icon:l.Yj9,label:"历史",isActive:"/history"===e}),(0,r.jsx)(p,{href:"/settings",icon:l.BH7,label:"设置",isActive:"/settings"===e})]})}function p(e){let{href:t,icon:s,label:a,isActive:i}=e;return(0,r.jsxs)(n(),{href:t,className:"flex flex-col items-center py-2 ".concat(i?"text-blue-600":"text-gray-400 hover:text-gray-600"," text-xs"),children:[(0,r.jsx)(c.g,{icon:s,className:"text-lg mb-1"}),(0,r.jsx)("span",{children:a})]})}function b(e){let{children:t}=e;return(0,a.useEffect)(()=>{let e=()=>{let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,r.jsxs)("div",{className:"bg-gray-50 h-screen flex flex-col overflow-hidden",style:{height:"calc(var(--vh, 1vh) * 100)"},children:[(0,r.jsx)(u,{}),(0,r.jsxs)("main",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[(0,r.jsx)(h,{}),(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:t})]}),(0,r.jsx)(f,{})]})}},60136:(e,t,s)=>{s.d(t,{A:()=>h});var r=s(95155),a=s(12115),i=s(36505),n=s(3578),c=s(37883),l=s(92023),o=s(14809),d=s(58497),x=s(34646),u=s(83846);function m(e){let{item:t,onCopy:s,onEdit:m,onDelete:h,onToggleFavorite:g}=e,[f,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),{showToast:v}=(0,o.d)(),j=t.type===l.D.CODE?(0,u.o)(t.content):"",N=async()=>{try{await navigator.clipboard.writeText(t.content),p(!0),s(t),setTimeout(()=>{p(!1)},2e3)}catch(e){console.error("复制到剪贴板失败:",e),v("复制失败","error")}};return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-soft overflow-hidden hover:shadow-medium transition-shadow group flex flex-col h-[180px]",children:[(0,r.jsxs)("div",{className:"p-3 border-b border-gray-100 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",title:"设备: ".concat(t.device_type||"未知"),children:(()=>{switch(t.device_type){case l.b.DESKTOP:return(0,r.jsx)(i.g,{icon:n.ArK,className:"text-gray-600"});case l.b.PHONE:return(0,r.jsx)(i.g,{icon:n.mVu,className:"text-gray-600"});case l.b.TABLET:return(0,r.jsx)(i.g,{icon:n.Wm9,className:"text-gray-600"});default:return(0,r.jsx)(i.g,{icon:n.EvL,className:"text-gray-400"})}})()}),(0,r.jsx)("h3",{className:"font-medium text-sm line-clamp-1",children:t.title||"未命名"})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("button",{className:"p-1 ".concat(t.isFavorite?"text-amber-500":"text-gray-300 hover:text-amber-500"),onClick:()=>g(t),children:(0,r.jsx)(i.g,{icon:t.isFavorite?n.yy:c.yy,className:"text-xs"})})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(()=>{switch(t.type){case l.D.CODE:return(0,r.jsx)("div",{className:"bg-gray-900 h-24 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full overflow-y-auto custom-scrollbar",children:(0,r.jsx)(d.A,{language:j,style:x.uf,customStyle:{margin:0,padding:"8px",fontSize:"0.75rem",backgroundColor:"transparent",height:"auto",minHeight:"100%"},wrapLines:!0,wrapLongLines:!0,showLineNumbers:!0,lineNumberStyle:{opacity:.4,minWidth:"2.5em",paddingRight:"0.5em"},children:t.content})})});case l.D.LINK:return(0,r.jsx)("div",{className:"p-3 bg-white h-24 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 flex-shrink-0 rounded bg-gray-100 flex items-center justify-center text-gray-400",children:(0,r.jsx)(i.g,{icon:n.CQO})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600 truncate",children:t.title||"链接"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:t.content})]})]})});case l.D.PASSWORD:return(0,r.jsx)("div",{className:"p-3 bg-white h-24 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 flex-shrink-0 rounded bg-gray-100 flex items-center justify-center text-gray-400",children:(0,r.jsx)(i.g,{icon:n.DW4})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:t.title||"密码"}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:b?t.content:"•".repeat(Math.min(20,t.content.length))}),(0,r.jsx)("button",{className:"ml-2 text-xs text-blue-600",onClick:()=>y(!b),children:b?"隐藏":"显示"})]})]})]})});case l.D.IMAGE:return(0,r.jsx)("div",{className:"p-3 bg-white h-24 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 flex-shrink-0 rounded bg-gray-100 flex items-center justify-center text-gray-400",children:(0,r.jsx)(i.g,{icon:n.Cyq})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:t.title||"图片"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["图片链接: ",t.content]})]})]})});case l.D.FILE:return(0,r.jsx)("div",{className:"p-3 bg-white h-24 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 flex-shrink-0 rounded bg-gray-100 flex items-center justify-center text-gray-400",children:(0,r.jsx)(i.g,{icon:n.A4h})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800 truncate",children:t.title||"文件"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["文件路径: ",t.content]})]})]})});default:return(0,r.jsx)("div",{className:"p-3 bg-white h-24 overflow-y-auto",children:(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.content})})}})()}),(0,r.jsxs)("div",{className:"p-2 bg-gray-50 text-xs text-gray-500 flex items-center justify-between mt-auto",children:[(0,r.jsx)("span",{children:(e=>{try{let t=e.created_at||e.createdAt||"",s=new Date(t);if(isNaN(s.getTime()))return"日期未知";return s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-")}catch(e){return console.error("日期格式化错误:",e),"日期未知"}})(t)}),(0,r.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{className:"p-1 hover:text-blue-600",title:f?"已复制":"复制",onClick:N,children:(0,r.jsx)(i.g,{icon:c.jPR})}),(0,r.jsx)("button",{className:"p-1 hover:text-gray-800",title:"编辑",onClick:()=>m(t),children:(0,r.jsx)(i.g,{icon:n.LFz})}),(0,r.jsx)("button",{className:"p-1 hover:text-red-600",title:"删除",onClick:()=>h(t),children:(0,r.jsx)(i.g,{icon:n.sjs})})]})]})]})}function h(e){let{items:t=[],onCopy:s,onEdit:i,onDelete:n,onToggleFavorite:c,hasMore:l=!1,onLoadMore:o,isLoadingMore:d=!1}=e,x=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!l||!o||d)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&o()},{threshold:.5});return x.current&&e.observe(x.current),()=>{x.current&&e.unobserve(x.current)}},[l,o,d]);let u=Array.isArray(t)?t.reduce((e,t)=>(e.find(e=>e.id===t.id)||e.push(t),e),[]):[];return 0===u.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-40 text-gray-400",children:"暂无剪贴板项目"}):(0,r.jsxs)("div",{className:"w-full pb-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.map(e=>(0,r.jsx)(m,{item:e,onCopy:s,onEdit:i,onDelete:n,onToggleFavorite:c},e.id))}),l&&(0,r.jsx)("div",{className:"mt-6 mb-2 flex justify-center",ref:x,children:d?(0,r.jsx)("div",{className:"text-gray-400 py-2",children:"加载中..."}):(0,r.jsx)("button",{onClick:o,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"加载更多"})})]})}},83846:(e,t,s)=>{s.d(t,{o:()=>r});function r(e){if(!e||"string"!=typeof e)return"javascript";let t=e.trim();if(t.includes("def ")||t.includes("import ")&&t.includes(":")||t.includes("from ")&&t.includes(" import ")||t.includes("print(")||/^([ \t]*)for.*in.*:/.test(t)||/^([ \t]*)if.*:/.test(t)||/^([ \t]*)class.*:/.test(t))return"python";if(t.includes("<html")||t.includes("<!DOCTYPE")||t.includes("<div")&&t.includes("</div>")||t.includes("<p")&&t.includes("</p>")||t.includes("<span")&&t.includes("</span>"))return"html";if(t.includes("{")&&t.includes("}")&&t.includes(":")&&!t.includes("?:")&&(t.includes(";")||/[^;"\]]\s*\n/.test(t))&&(t.match(/{/g)||[]).length===(t.match(/}/g)||[]).length)return"css";if(/SELECT\s+.*\s+FROM/i.test(t)||/INSERT\s+INTO/i.test(t)||/UPDATE\s+.*\s+SET/i.test(t)||/DELETE\s+FROM/i.test(t)||/CREATE\s+TABLE/i.test(t))return"sql";if(/public\s+class/i.test(t)||/private\s+static/i.test(t)||/protected\s+void/i.test(t)||/import\s+java\./i.test(t)||/package\s+[a-z0-9_\.]+;/i.test(t))return"java";if(/#include\s+<[a-z0-9_]+>/i.test(t)||/std::/i.test(t)||/namespace\s+[a-z0-9_]+\s*{/i.test(t)||/template\s*<.*>/i.test(t))return"cpp";if(/package\s+main/i.test(t)||/import\s+\(/i.test(t)||/func\s+\([a-z]\s+\*?[A-Z][a-zA-Z0-9_]*\)/i.test(t)||/func\s+[A-Z][a-zA-Z0-9_]*\s*\(/i.test(t))return"go";if(/fn\s+[a-z0-9_]+\s*\(/i.test(t)||/let\s+mut\s+/i.test(t)||/impl\s+/i.test(t)||/use\s+std::/i.test(t))return"rust";if(/interface\s+[A-Z][a-zA-Z0-9_]*\s*\{/.test(t)||/type\s+[A-Z][a-zA-Z0-9_]*\s*[=<]/.test(t)||/:\s*(string|number|boolean|any)\s*[,;=){\[]/.test(t)||/:\s*[A-Z][a-zA-Z0-9_]*\s*[,;=){\[]/.test(t)||/import\s+[{]/.test(t)&&/}\s+from\s+/.test(t))return"typescript";if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t),"json"}catch(e){}return"javascript"}},92023:(e,t,s)=>{s.d(t,{D:()=>r,b:()=>a});var r=function(e){return e.TEXT="text",e.LINK="link",e.CODE="code",e.PASSWORD="password",e.IMAGE="image",e.FILE="file",e.OTHER="other",e}({}),a=function(e){return e.PHONE="phone",e.TABLET="tablet",e.DESKTOP="desktop",e.OTHER="other",e}({})},99749:(e,t,s)=>{s.d(t,{G:()=>x});var r=s(23464);let a={STORAGE_KEY:"clipflow_device_id",generateDeviceId:()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),getDeviceId:()=>{let e=localStorage.getItem(a.STORAGE_KEY);return e||(e=a.generateDeviceId(),localStorage.setItem(a.STORAGE_KEY,e)),e}};var i=s(44496),n=s(49509);let c=r.A.create({baseURL:n.env.NEXT_PUBLIC_API_URL||"/api",headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use(e=>{var t;return(null==(t=e.method)?void 0:t.toLowerCase())==="get"&&(e.params={...e.params,device_id:a.getDeviceId()}),e},e=>Promise.reject(e));let l=e=>e&&"object"==typeof e&&"code"in e&&"number"==typeof e.code&&"success"in e&&"boolean"==typeof e.success?e:{code:200,message:"成功",success:!0,data:e},o=(e,t)=>{let s=t,a=500;if(r.A.isAxiosError(e))if(e.response){a=e.response.status;let t=e.response.data;s="服务器错误 (".concat(a,"): ").concat(t&&"object"==typeof t&&"message"in t?String(t.message):e.message)}else e.request?(s="服务器无响应，请检查网络连接",a=503):s=e.message||"未知错误";else e instanceof Error&&(s=e.message);return{code:a,message:s,success:!1,error:s}},d=e=>({id:e.id,title:e.title||"",content:e.content,type:e.type,isFavorite:e.favorite||e.isFavorite||!1,created_at:e.created_at||e.createdAt||"",createdAt:e.created_at||e.createdAt||"",updatedAt:e.updated_at||e.updatedAt||"",device_id:e.device_id,device_type:e.device_type}),x={getLatestClipboard:async()=>{try{let e=await c.get("/clipboard"),t=l(e.data);return t.success&&t.data&&(t.data=d(t.data)),t}catch(e){return o(e,"获取最新剪贴板失败")}},getClipboardHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,s=arguments.length>2?arguments[2]:void 0;try{let r={page:e,size:t};s&&(r.type=s);let a=await c.get("/clipboard/history",{params:r}),i=l(a.data);return i.success&&i.data&&(Array.isArray(i.data)?i.data=i.data.map(d):i.data.items&&(i.data.items=i.data.items.map(d))),i}catch(e){return o(e,"获取剪贴板历史失败")}},getFavorites:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;try{let s=await c.get("/clipboard/favorites",{params:{page:e,size:t}}),r=l(s.data);return r.success&&r.data&&(console.log("API返回的收藏数据:",r.data),Array.isArray(r.data)?r.data=r.data.map(d):r.data.items&&(r.data.items=r.data.items.map(d))),r}catch(e){return o(e,"获取收藏夹失败")}},saveClipboard:async e=>{try{let t={...e,device_id:a.getDeviceId(),device_type:(0,i.A)()},s=await c.post("/clipboard",t),r=l(s.data);return r.success&&r.data&&(r.data=d(r.data)),r}catch(e){return o(e,"保存剪贴板失败")}},updateClipboard:async(e,t)=>{try{let s={...t,device_id:t.device_id||a.getDeviceId(),device_type:t.device_type||(0,i.A)()},r=await c.put("/clipboard/".concat(e),s),n=l(r.data);return n.success&&n.data&&(n.data=d(n.data)),n}catch(e){return o(e,"更新剪贴板失败")}},toggleFavorite:async(e,t)=>{try{let s=await c.put("/clipboard/".concat(e,"/favorite"),{isFavorite:t,device_id:a.getDeviceId()}),r=l(s.data);return r.success&&r.data&&(r.data=d(r.data)),r}catch(e){return o(e,"切换收藏状态失败")}},deleteClipboard:async e=>{try{let t=await c.delete("/clipboard/".concat(e));return l(t.data)}catch(e){return o(e,"删除剪贴板失败")}},getClipboardCount:async e=>{try{let t={};e&&(t.type=e);let s=await c.get("/clipboard/count",{params:t});return l(s.data)}catch(e){return o(e,"获取剪贴板数量失败")}},getClipboardItem:async e=>{try{let t=await c.get("/clipboard/".concat(e)),s=l(t.data);return s.success&&s.data&&(s.data=d(s.data)),s}catch(e){return o(e,"获取剪贴板项目失败")}}}}}]);